import Link from "next/link"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { CheckCircleIcon, XCircleIcon } from "lucide-react"

export default function QuizResultsPage({ params }: { params: { id: string } }) {
  // Mock quiz result data
  const quizResult = {
    id: params.id,
    title: "Math Quiz - Algebra",
    date: "May 9, 2024",
    score: 75,
    totalQuestions: 20,
    correctAnswers: 15,
    timeSpent: "18:45",
    questions: [
      {
        id: 1,
        text: "What is the value of x in the equation 2x + 5 = 13?",
        userAnswer: "b",
        correctAnswer: "b",
        isCorrect: true,
        options: [
          { id: "a", text: "3" },
          { id: "b", text: "4" },
          { id: "c", text: "5" },
          { id: "d", text: "6" },
        ],
      },
      {
        id: 2,
        text: "Simplify the expression: 3(2x - 4) + 5",
        userAnswer: "a",
        correctAnswer: "c",
        isCorrect: false,
        options: [
          { id: "a", text: "6x - 7" },
          { id: "b", text: "6x - 12 + 5" },
          { id: "c", text: "6x - 7" },
          { id: "d", text: "6x + 5" },
        ],
      },
      {
        id: 3,
        text: "Solve for y: 4y - 7 = 9",
        userAnswer: "a",
        correctAnswer: "a",
        isCorrect: true,
        options: [
          { id: "a", text: "y = 4" },
          { id: "b", text: "y = 16/4" },
          { id: "c", text: "y = 2" },
          { id: "d", text: "y = 8" },
        ],
      },
    ],
  }

  return (
    <div className="container max-w-4xl py-8">
      <Card className="mb-6">
        <CardHeader>
          <div className="flex justify-between items-center">
            <div>
              <CardTitle className="text-2xl">{quizResult.title} - Results</CardTitle>
              <CardDescription>Completed on {quizResult.date}</CardDescription>
            </div>
            <Link href="/dashboard/student">
              <Button variant="outline">Back to Dashboard</Button>
            </Link>
          </div>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div className="bg-muted/50 p-4 rounded-lg text-center">
              <div className="text-3xl font-bold text-primary">{quizResult.score}%</div>
              <div className="text-sm text-muted-foreground">Score</div>
            </div>
            <div className="bg-muted/50 p-4 rounded-lg text-center">
              <div className="text-3xl font-bold">
                {quizResult.correctAnswers}/{quizResult.totalQuestions}
              </div>
              <div className="text-sm text-muted-foreground">Correct Answers</div>
            </div>
            <div className="bg-muted/50 p-4 rounded-lg text-center">
              <div className="text-3xl font-bold">{quizResult.timeSpent}</div>
              <div className="text-sm text-muted-foreground">Time Spent</div>
            </div>
            <div className="bg-muted/50 p-4 rounded-lg text-center">
              <div className="text-3xl font-bold">{quizResult.totalQuestions - quizResult.correctAnswers}</div>
              <div className="text-sm text-muted-foreground">Incorrect Answers</div>
            </div>
          </div>
        </CardContent>
      </Card>

      <h2 className="text-xl font-bold mb-4">Question Review</h2>

      {quizResult.questions.map((question, index) => (
        <Card key={question.id} className="mb-4">
          <CardHeader className="pb-2">
            <div className="flex items-start gap-2">
              <div className={`mt-0.5 ${question.isCorrect ? "text-green-500" : "text-red-500"}`}>
                {question.isCorrect ? <CheckCircleIcon className="h-5 w-5" /> : <XCircleIcon className="h-5 w-5" />}
              </div>
              <CardTitle className="text-base">
                Question {index + 1}: {question.text}
              </CardTitle>
            </div>
          </CardHeader>
          <CardContent>
            <div className="space-y-2">
              {question.options.map((option) => (
                <div
                  key={option.id}
                  className={`p-3 rounded-md border ${
                    option.id === question.correctAnswer
                      ? "border-green-500 bg-green-50 dark:bg-green-950/20"
                      : option.id === question.userAnswer && !question.isCorrect
                        ? "border-red-500 bg-red-50 dark:bg-red-950/20"
                        : ""
                  }`}
                >
                  <div className="flex items-center gap-2">
                    {option.id === question.correctAnswer && <CheckCircleIcon className="h-4 w-4 text-green-500" />}
                    {option.id === question.userAnswer && !question.isCorrect && (
                      <XCircleIcon className="h-4 w-4 text-red-500" />
                    )}
                    <span>{option.text}</span>
                  </div>
                </div>
              ))}
            </div>
            {!question.isCorrect && (
              <div className="mt-3 text-sm">
                <span className="font-medium">Correct answer:</span>{" "}
                {question.options.find((o) => o.id === question.correctAnswer)?.text}
              </div>
            )}
          </CardContent>
        </Card>
      ))}
    </div>
  )
}
